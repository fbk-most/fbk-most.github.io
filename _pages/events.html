---
layout: base
title: News and Events
permalink: /events/
---

<!-- ===== BANNER SECTION ===== -->
<section class="most-section most-section--banner">
  <h1>News and Events</h1>
</section>

<!-- ===== NEWS ===== -->
<section id="news" class="most-section">
  <!-- ===== SLIDESHOW ===== -->

  <div class="highlights-slideshow">
    {% assign all_news_slideshow = site.data.news | where_exp: "n", "n.Priority != -1"%} 
    {% assign today = 'now' | date: "%Y-%m-%d" %}

    {% assign future_news = all_news_slideshow | where_exp: "n", "n.DateISO > today" %}
   
    {% if future_news.size > 10 %}
      <!-- Limit to 10 using Date and Priority -->
      {% assign future_news = all_news_slideshow | where_exp: "n", "n.DateISO > today" %}
      {% assign future_news = future_news | sort: "DateISO" | reverse %}
      {% assign sorted_by_priority = future_news | sort: "Priority" | reverse %}

      {% assign highlights = sorted_by_priority | slice: 0,10 %}
    {% else %}
      {% assign highlights = future_news %}
      <!-- Fill missing with older news with Priority = 10 -->
      {% assign older_news = all_news_slideshow | where_exp: "n", "n.DateISO <= today and n.Priority == 10" %}
      {% assign older_news = older_news | sort: "DateISO" | reverse %}
      {% assign needed = 10 | minus: highlights.size %}
      {% assign fill_news = older_news | slice: 0, needed %}
      {% assign highlights = highlights | concat: fill_news %}
    {% endif %}

    <!-- Step 4: Sort final highlights by DateISO ascending for slideshow -->
    {% assign highlights = highlights | sort: "DateISO" | reverse %}

    <div class="slideshow-container">
      {% for post in highlights %}
        {% assign image_url = post.Image %}

        <div class="mySlides">
          <div class="slide-blur-bg" style="background-image: url('{{ image_url | relative_url }}');"></div>
          
          <img class="slide-main-img" src="{{ image_url | relative_url }}" alt="{{ post.TITLE }}">
          
          <div class="slide-caption">
            <h3>{{ post.DATE }} - {{ post.TITLE }}</h3>
            <p>{{ post.DESCRIPTION }}</p>
          </div>
        </div>
      {% endfor %}

      <button class="prev-slide"></button>
      <button class="next-slide"></button>
    </div>

    <div class="dots-container">
      {% for post in highlights %}
        <span class="dot"></span>
      {% endfor %}
    </div>
  </div>

  <h2 class="most-section__title">News</h2>
  <!-- ===== CALENDAR ===== -->
  <div class="most-section__content">
    <div class="most-section__content calendar-container">
      <iframe src="https://calendar.google.com/calendar/embed?src=c_d601bfc4336cbbdef82bd1f757c1a53dfb735d6017da5d29e97cf40943e68146%40group.calendar.google.com&ctz=Europe%2FRome" style="border: 0" width="800" height="600" frameborder="0" scrolling="no"></iframe>
    </div>
  </div>
  
  <!-- === Recent news (last 3 months) === -->

  <div class="most-section__content">

    {% assign all_news = site.data.news %} 
    {% assign today = 'now' | date: "%Y-%m-%d" %}
    {% assign three_months_ago = 'now' | date: "%s" | minus: 7776000 %} <!-- 7776000 seconds -->

    {% assign recent_news = "" | split: "" %}
    {% assign older_news = "" | split: "" %}

    {% for n in all_news %}
      {% assign news_date = n.DateISO | date: "%s" | plus: 0 %} <!-- convert to number -->
      {% if news_date >= three_months_ago %}
        {% assign recent_news = recent_news | push: n %}
      {% else %}
        {% assign older_news = older_news | push: n %}
      {% endif %}
    {% endfor %}

    {% assign recent_news = recent_news | sort: "DateISO" | reverse %}
    {% assign older_news = older_news | sort: "DateISO" | reverse %}
    
    {% for post in recent_news %}
        <div class="most-section__block">
          {% assign display_date = post.DATE %}
            <h3>{{ post.DATE }} - {{ post.TITLE }}</h3>
            <p>{{ post.DESCRIPTION }}</p>
            {% if post["Longer description"] %}
              <p>{{ post["Longer description"] }}</p>
            {% endif %}
        </div>
    {% endfor %}
  </div>

    <!-- === Past news (older than 3 months) === -->
  <button class="past-news-toggle">Past events â–¼</button>
  <div class="most-section__content">
    <div class="past-news-list" style="display:none; margin-top:1rem;">
      {% for post in older_news %}
        <div class="most-section__block">
          <h3>{{ post.DATE }} - {{ post.TITLE }}</h3>
        </div>
      {% endfor %}
    </div>
  </div>
</section>

<!-- ===== SEMINARS ===== -->
<section id="seminars" class="most-section">
  <h2 class="most-section__title">Seminars</h2>
  <div class="most-section__content">
    TODO
  </div>

</section>